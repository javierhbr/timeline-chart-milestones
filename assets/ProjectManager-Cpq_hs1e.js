import{c as y,r,o as he,j as e,D as C,a as P,b as D,d as M,h as w,e as S,I as z,B as l,P as A,L as B,f as H,k as xe,C as K,p as Q,T as V,g as Y,q as W,s as J,l as je,t as ue,u as pe,v as ge}from"./index-Bsg0-DuV.js";import{ConfirmationDialog as fe}from"./ConfirmationDialog-CumyHxQk.js";import{D as U,a as X,b as Z,c as m,d as ee}from"./dropdown-menu-DKs1Xula.js";import{S as Ne}from"./search-o0_8riO-.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],se=y("ellipsis-vertical",we);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ve=y("grid-3x3",ye);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ke=y("list",be);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ae=y("pen",Ce);function ze({isOpen:v,onClose:j,onSelectProject:b,currentProjectId:E}){const[i,te]=r.useState([]),[L,T]=r.useState([]),[u,re]=r.useState(""),[p,F]=r.useState("grid"),[le,g]=r.useState(!1),[ne,f]=r.useState(!1),[oe,k]=r.useState(!1),[n,c]=r.useState(""),[d,N]=r.useState(null);r.useEffect(()=>{v&&h()},[v]),r.useEffect(()=>{if(!u.trim())T(i);else{const s=u.toLowerCase();T(i.filter(t=>t.name.toLowerCase().includes(s)||new Date(t.lastModified).toLocaleDateString().includes(s)))}},[i,u]);const h=()=>{const s=he();te(s)},R=()=>{if(!n.trim())return;const s={milestones:[],projectStartDate:new Date().toISOString(),expandedMilestones:[],milestoneOrder:[],changeHistory:[]},t=je(n.trim(),s,!0);h(),c(""),g(!1),b(t),j()},_=()=>{!d||!n.trim()||(ue(d.id,n.trim()),h(),c(""),N(null),f(!1))},$=s=>{ge(s.id)&&h()},ie=()=>{d&&(pe(d.id),h(),N(null),k(!1))},I=()=>{c(xe()),g(!0)},O=s=>{N(s),c(s.name),f(!0)},q=s=>{N(s),k(!0)},G=s=>{const{milestones:t}=s.timelineData,x=t.reduce((a,me)=>a+me.tasks.length,0),o=t.length;return{totalTasks:x,totalMilestones:o}},ce=({project:s})=>{const{totalTasks:t,totalMilestones:x}=G(s),o=s.id===E;return e.jsx(K,{className:`p-5 hover:shadow-lg transition-all duration-200 cursor-pointer relative border-2 ${o?"border-blue-500 bg-blue-50/50 shadow-md":"border-transparent hover:border-gray-200"}`,children:e.jsxs("div",{onClick:()=>{b(s),j()},className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",style:{width:"calc(100% - 40px)"},children:[o&&e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 flex-shrink-0",title:"Current project"}),e.jsx("h3",{className:"font-semibold text-lg truncate text-gray-900",children:s.name})]}),e.jsxs(U,{children:[e.jsx(X,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-100",onClick:a=>a.stopPropagation(),children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsxs(Z,{align:"end",children:[e.jsxs(m,{onClick:a=>{a.stopPropagation(),O(s)},children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Rename"]}),e.jsxs(m,{onClick:a=>{a.stopPropagation(),$(s)},children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),e.jsx(ee,{}),e.jsxs(m,{onClick:a=>{a.stopPropagation(),q(s)},className:"text-red-600 focus:text-red-600",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(w,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:x})," ","milestones"]}),e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Y,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:t})," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground pt-2 border-t border-gray-100",children:[e.jsx(J,{className:"h-3 w-3"}),"Modified"," ",W(new Date(s.lastModified),{addSuffix:!0})]})]})]})})},de=({project:s})=>{const{totalTasks:t,totalMilestones:x}=G(s),o=s.id===E;return e.jsx(K,{className:`p-4 hover:shadow-md transition-all duration-200 cursor-pointer border-l-4 ${o?"border-l-blue-500 bg-blue-50/30 shadow-sm":"border-l-transparent hover:border-l-gray-300"}`,children:e.jsxs("div",{onClick:()=>{b(s),j()},className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",style:{width:"calc(100% - 40px)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 flex-shrink-0",title:"Current project"}),e.jsx("h3",{className:"font-semibold text-base truncate text-gray-900",children:s.name})]}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(w,{className:"h-3 w-3 flex-shrink-0"}),x," milestones"]}),e.jsxs("span",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Y,{className:"h-3 w-3 flex-shrink-0"}),t," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx(J,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Modified"," ",W(new Date(s.lastModified),{addSuffix:!0})]})]})]})]}),e.jsxs(U,{children:[e.jsx(X,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:a=>a.stopPropagation(),children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsxs(Z,{align:"end",children:[e.jsxs(m,{onClick:a=>{a.stopPropagation(),O(s)},children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Rename"]}),e.jsxs(m,{onClick:a=>{a.stopPropagation(),$(s)},children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),e.jsx(ee,{}),e.jsxs(m,{onClick:a=>{a.stopPropagation(),q(s)},className:"text-red-600 focus:text-red-600",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{open:v,onOpenChange:j,children:e.jsxs(P,{className:"max-h-[85vh] overflow-hidden flex flex-col p-0",style:{width:"50vw",maxWidth:"none"},children:[e.jsxs(D,{className:"px-6 py-4 border-b",children:[e.jsxs(M,{className:"flex items-center gap-2 text-xl",children:[e.jsx(w,{className:"h-6 w-6"}),"Project Manager"]}),e.jsx(S,{className:"text-base mt-1",children:"Create, manage, and switch between your Gantt timeline projects."}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded mx-6",children:"⚠️ All project data is saved locally in your browser's storage and will be lost if you clear browser data."})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 px-6 py-4 bg-gray-50/50",children:[e.jsxs("div",{className:"flex-1 relative max-w-sm",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(z,{placeholder:"Search projects...",value:u,onChange:s=>re(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(l,{variant:p==="grid"?"default":"ghost",size:"sm",onClick:()=>F("grid"),className:"rounded-r-none",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(l,{variant:p==="list"?"default":"ghost",size:"sm",onClick:()=>F("list"),className:"rounded-l-none",children:e.jsx(ke,{className:"h-4 w-4"})})]}),e.jsxs(l,{onClick:I,className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"New Project"]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto px-6 py-4",children:L.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx(w,{className:"h-16 w-16 text-muted-foreground mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.length===0?"No projects yet":"No projects found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:i.length===0?"Create your first project to get started with organizing your Gantt timelines.":"Try adjusting your search terms to find the project you're looking for."}),i.length===0&&e.jsxs(l,{onClick:I,size:"lg",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Create Your First Project"]})]}):e.jsx("div",{className:p==="grid"?"grid grid-cols-1 sm:grid-cols-2 gap-4":"space-y-4",children:L.map(s=>p==="grid"?e.jsx(ce,{project:s},s.id):e.jsx(de,{project:s},s.id))})})]})}),e.jsx(C,{open:le,onOpenChange:g,children:e.jsxs(P,{children:[e.jsxs(D,{children:[e.jsx(M,{children:"Create New Project"}),e.jsx(S,{children:"Enter a name for your new project. You can always change it later."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(B,{htmlFor:"projectName",children:"Project Name"}),e.jsx(z,{id:"projectName",value:n,onChange:s=>c(s.target.value),placeholder:"Enter project name...",className:"mt-2",onKeyDown:s=>{s.key==="Enter"&&R()},autoFocus:!0})]}),e.jsxs(H,{children:[e.jsx(l,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(l,{onClick:R,disabled:!n.trim(),children:"Create Project"})]})]})}),e.jsx(C,{open:ne,onOpenChange:f,children:e.jsxs(P,{children:[e.jsxs(D,{children:[e.jsx(M,{children:"Rename Project"}),e.jsxs(S,{children:['Enter a new name for "',d?.name,'".']})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(B,{htmlFor:"newProjectName",children:"Project Name"}),e.jsx(z,{id:"newProjectName",value:n,onChange:s=>c(s.target.value),placeholder:"Enter new project name...",className:"mt-2",onKeyDown:s=>{s.key==="Enter"&&_()},autoFocus:!0})]}),e.jsxs(H,{children:[e.jsx(l,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(l,{onClick:_,disabled:!n.trim(),children:"Rename"})]})]})}),e.jsx(fe,{isOpen:oe,onClose:()=>k(!1),onConfirm:ie,title:"Delete Project",description:`Are you sure you want to delete "${d?.name}"? This action cannot be undone and all project data will be permanently removed.`,confirmLabel:"Delete Project",cancelLabel:"Cancel",variant:"destructive"})]})}export{ze as ProjectManager};
