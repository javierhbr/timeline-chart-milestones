import{r,aO as j,j as e,D as C,p as D,q as S,s as E,P as g,u as M,L as b,I as k,v as B,B as f}from"./index-CfEYXZBA.js";import{T as F}from"./textarea-CI3xWn8i.js";import{C as P}from"./circle-alert-DUfNsyZ5.js";function A({isOpen:o,onClose:m,onConfirm:N,milestones:d}){const[t,x]=r.useState(""),[h,p]=r.useState(""),[l,i]=r.useState([]),[a,c]=r.useState(!1);r.useEffect(()=>{o&&(x(""),p(""),i([]),c(!1))},[o]),r.useEffect(()=>{if(t){const s=j(t,d);i(s.errors)}else i([])},[t,d]);const v=async s=>{if(s.preventDefault(),a)return;const n=j(t,d);if(!n.isValid){i(n.errors);return}c(!0);try{await N(t.trim(),h.trim()||void 0),m()}catch(w){console.error("❌ Error creating milestone:",w),i(["Failed to create milestone. Please try again."])}finally{c(!1)}},u=()=>{a||m()},y=t.trim().length>0&&l.length===0&&!a;return e.jsx(C,{open:o,onOpenChange:s=>!s&&u(),children:e.jsxs(D,{className:"sm:max-w-md",children:[e.jsxs(S,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Create New Milestone"]}),e.jsx(M,{children:"Add a new milestone to organize your project tasks."})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"milestone-name",children:["Milestone Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(k,{id:"milestone-name",placeholder:"e.g., Phase 1 - Requirements",value:t,onChange:s=>x(s.target.value),disabled:a,className:l.length>0?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"milestone-description",children:"Description (Optional)"}),e.jsx(F,{id:"milestone-description",placeholder:"Brief description of this milestone...",value:h,onChange:s=>p(s.target.value),disabled:a,rows:3})]}),l.length>0&&e.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-red-600 mt-0.5"}),e.jsx("div",{className:"space-y-1",children:l.map((s,n)=>e.jsx("p",{className:"text-sm text-red-600",children:s},n))})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsx("div",{className:"flex items-start gap-2",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-2",children:"New milestone will:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"• Start empty with no tasks"}),e.jsx("li",{children:"• Get automatically positioned by date when tasks are added"}),e.jsx("li",{children:"• Be available for task assignment"})]})]})})}),e.jsxs(B,{className:"gap-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:u,disabled:a,children:"Cancel"}),e.jsxs(f,{type:"submit",disabled:!y,className:"flex items-center gap-2",children:[a?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):e.jsx(g,{className:"h-4 w-4"}),a?"Creating...":"Create Milestone"]})]})]})]})})}export{A as MilestoneCreateDialog};
