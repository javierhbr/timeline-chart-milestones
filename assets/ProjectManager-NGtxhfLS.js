import{c as L,t as d,h as ge,i as pe,k as Ne,l as V,m as U,n as _,r as f,o as we,j as e,F,B as N,P as W,g as ye,C as J,p as Z,T as ee,a as se,q as te,d as De,s as be,u as ve,v as Me}from"./index-DeksGDDi.js";import{I as z}from"./input-BoUPo5Dg.js";import{D as O,a as E,b as X,c as Y,d as $,L as ae,e as ne}from"./label-BttNplgj.js";import{ConfirmationDialog as ke}from"./ConfirmationDialog-BS8pG_yN.js";import{D as re,a as oe,b as le,c as k,d as ie}from"./dropdown-menu-B2aWcAqX.js";import{S as Ce}from"./search-DxlQwwD_.js";import"./index-Dhp8sDxk.js";import"./x-Ds1ghz-F.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ce=L("ellipsis-vertical",Pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Te=L("grid-3x3",Se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Fe=L("list",_e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],de=L("pen",Ie);function I(n,a){const r=d(n),l=d(a),t=r.getTime()-l.getTime();return t<0?-1:t>0?1:t}function Le(n){return ge(n,Date.now())}function Re(n,a){const r=d(n),l=d(a),t=r.getFullYear()-l.getFullYear(),j=r.getMonth()-l.getMonth();return t*12+j}function ze(n){return a=>{const l=(n?Math[n]:Math.trunc)(a);return l===0?0:l}}function Oe(n,a){return+d(n)-+d(a)}function Ee(n){const a=d(n);return a.setHours(23,59,59,999),a}function Xe(n){const a=d(n),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function Ye(n){const a=d(n);return+Ee(a)==+Xe(a)}function $e(n,a){const r=d(n),l=d(a),t=I(r,l),j=Math.abs(Re(r,l));let h;if(j<1)h=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-t*j);let o=I(r,l)===-t;Ye(d(n))&&j===1&&I(n,l)===1&&(o=!1),h=t*(j-Number(o))}return h===0?0:h}function Ae(n,a,r){const l=Oe(n,a)/1e3;return ze(r?.roundingMethod)(l)}function He(n,a,r){const l=pe(),t=r?.locale??l.locale??Ne,j=2520,h=I(n,a);if(isNaN(h))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:h});let g,D;h>0?(g=d(a),D=d(n)):(g=d(n),D=d(a));const u=Ae(D,g),S=(V(D)-V(g))/1e3,c=Math.round((u-S)/60);let x;if(c<2)return r?.includeSeconds?u<5?t.formatDistance("lessThanXSeconds",5,o):u<10?t.formatDistance("lessThanXSeconds",10,o):u<20?t.formatDistance("lessThanXSeconds",20,o):u<40?t.formatDistance("halfAMinute",0,o):u<60?t.formatDistance("lessThanXMinutes",1,o):t.formatDistance("xMinutes",1,o):c===0?t.formatDistance("lessThanXMinutes",1,o):t.formatDistance("xMinutes",c,o);if(c<45)return t.formatDistance("xMinutes",c,o);if(c<90)return t.formatDistance("aboutXHours",1,o);if(c<U){const p=Math.round(c/60);return t.formatDistance("aboutXHours",p,o)}else{if(c<j)return t.formatDistance("xDays",1,o);if(c<_){const p=Math.round(c/U);return t.formatDistance("xDays",p,o)}else if(c<_*2)return x=Math.round(c/_),t.formatDistance("aboutXMonths",x,o)}if(x=$e(D,g),x<12){const p=Math.round(c/_);return t.formatDistance("xMonths",p,o)}else{const p=x%12,w=Math.trunc(x/12);return p<3?t.formatDistance("aboutXYears",w,o):p<9?t.formatDistance("overXYears",w,o):t.formatDistance("almostXYears",w+1,o)}}function me(n,a){return He(n,Le(n),a)}function Je({isOpen:n,onClose:a,onSelectProject:r,currentProjectId:l}){const[t,j]=f.useState([]),[h,o]=f.useState([]),[g,D]=f.useState(""),[u,S]=f.useState("grid"),[c,x]=f.useState(!1),[p,w]=f.useState(!1),[he,R]=f.useState(!1),[y,v]=f.useState(""),[M,T]=f.useState(null);f.useEffect(()=>{n&&C()},[n]),f.useEffect(()=>{if(!g.trim())o(t);else{const s=g.toLowerCase();o(t.filter(m=>m.name.toLowerCase().includes(s)||new Date(m.lastModified).toLocaleDateString().includes(s)))}},[t,g]);const C=()=>{const s=we();j(s)},A=()=>{if(!y.trim())return;const s={milestones:[],projectStartDate:new Date().toISOString(),expandedMilestones:[]},m=De(y.trim(),s,!0);C(),v(""),x(!1),r(m),a()},H=()=>{!M||!y.trim()||(be(M.id,y.trim()),C(),v(""),T(null),w(!1))},q=s=>{Me(s.id)&&C()},ue=()=>{M&&(ve(M.id),C(),T(null),R(!1))},G=()=>{v(ye()),x(!0)},B=s=>{T(s),v(s.name),w(!0)},K=s=>{T(s),R(!0)},Q=s=>{const{milestones:m}=s.timelineData,P=m.reduce((i,je)=>i+je.tasks.length,0),b=m.length;return{totalTasks:P,totalMilestones:b}},xe=({project:s})=>{const{totalTasks:m,totalMilestones:P}=Q(s),b=s.id===l;return e.jsx(J,{className:`p-5 hover:shadow-lg transition-all duration-200 cursor-pointer relative border-2 ${b?"border-blue-500 bg-blue-50/50 shadow-md":"border-transparent hover:border-gray-200"}`,children:e.jsxs("div",{onClick:()=>{r(s),a()},className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",style:{width:"calc(100% - 40px)"},children:[b&&e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 flex-shrink-0",title:"Current project"}),e.jsx("h3",{className:"font-semibold text-lg truncate text-gray-900",children:s.name})]}),e.jsxs(re,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-100",onClick:i=>i.stopPropagation(),children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsxs(le,{align:"end",children:[e.jsxs(k,{onClick:i=>{i.stopPropagation(),B(s)},children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Rename"]}),e.jsxs(k,{onClick:i=>{i.stopPropagation(),q(s)},children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),e.jsx(ie,{}),e.jsxs(k,{onClick:i=>{i.stopPropagation(),K(s)},className:"text-red-600 focus:text-red-600",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(F,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:P})," ","milestones"]}),e.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(se,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:m})," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground pt-2 border-t border-gray-100",children:[e.jsx(te,{className:"h-3 w-3"}),"Modified"," ",me(new Date(s.lastModified),{addSuffix:!0})]})]})]})})},fe=({project:s})=>{const{totalTasks:m,totalMilestones:P}=Q(s),b=s.id===l;return e.jsx(J,{className:`p-4 hover:shadow-md transition-all duration-200 cursor-pointer border-l-4 ${b?"border-l-blue-500 bg-blue-50/30 shadow-sm":"border-l-transparent hover:border-l-gray-300"}`,children:e.jsxs("div",{onClick:()=>{r(s),a()},className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",style:{width:"calc(100% - 40px)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 flex-shrink-0",title:"Current project"}),e.jsx("h3",{className:"font-semibold text-base truncate text-gray-900",children:s.name})]}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(F,{className:"h-3 w-3 flex-shrink-0"}),P," milestones"]}),e.jsxs("span",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(se,{className:"h-3 w-3 flex-shrink-0"}),m," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx(te,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Modified"," ",me(new Date(s.lastModified),{addSuffix:!0})]})]})]})]}),e.jsxs(re,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-gray-100",onClick:i=>i.stopPropagation(),children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsxs(le,{align:"end",children:[e.jsxs(k,{onClick:i=>{i.stopPropagation(),B(s)},children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Rename"]}),e.jsxs(k,{onClick:i=>{i.stopPropagation(),q(s)},children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),e.jsx(ie,{}),e.jsxs(k,{onClick:i=>{i.stopPropagation(),K(s)},className:"text-red-600 focus:text-red-600",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(O,{open:n,onOpenChange:a,children:e.jsxs(E,{className:"max-h-[85vh] overflow-hidden flex flex-col p-0",style:{width:"50vw",maxWidth:"none"},children:[e.jsxs(X,{className:"px-6 py-4 border-b",children:[e.jsxs(Y,{className:"flex items-center gap-2 text-xl",children:[e.jsx(F,{className:"h-6 w-6"}),"Project Manager"]}),e.jsx($,{className:"text-base mt-1",children:"Create, manage, and switch between your Gantt timeline projects."}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded mx-6",children:"⚠️ All project data is saved locally in your browser's storage and will be lost if you clear browser data."})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 px-6 py-4 bg-gray-50/50",children:[e.jsxs("div",{className:"flex-1 relative max-w-sm",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(z,{placeholder:"Search projects...",value:g,onChange:s=>D(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(N,{variant:u==="grid"?"default":"ghost",size:"sm",onClick:()=>S("grid"),className:"rounded-r-none",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(N,{variant:u==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-l-none",children:e.jsx(Fe,{className:"h-4 w-4"})})]}),e.jsxs(N,{onClick:G,className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"New Project"]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto px-6 py-4",children:h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx(F,{className:"h-16 w-16 text-muted-foreground mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.length===0?"No projects yet":"No projects found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:t.length===0?"Create your first project to get started with organizing your Gantt timelines.":"Try adjusting your search terms to find the project you're looking for."}),t.length===0&&e.jsxs(N,{onClick:G,size:"lg",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Create Your First Project"]})]}):e.jsx("div",{className:u==="grid"?"grid grid-cols-1 sm:grid-cols-2 gap-4":"space-y-4",children:h.map(s=>u==="grid"?e.jsx(xe,{project:s},s.id):e.jsx(fe,{project:s},s.id))})})]})}),e.jsx(O,{open:c,onOpenChange:x,children:e.jsxs(E,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:"Create New Project"}),e.jsx($,{children:"Enter a name for your new project. You can always change it later."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(ae,{htmlFor:"projectName",children:"Project Name"}),e.jsx(z,{id:"projectName",value:y,onChange:s=>v(s.target.value),placeholder:"Enter project name...",className:"mt-2",onKeyDown:s=>{s.key==="Enter"&&A()},autoFocus:!0})]}),e.jsxs(ne,{children:[e.jsx(N,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(N,{onClick:A,disabled:!y.trim(),children:"Create Project"})]})]})}),e.jsx(O,{open:p,onOpenChange:w,children:e.jsxs(E,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:"Rename Project"}),e.jsxs($,{children:['Enter a new name for "',M?.name,'".']})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(ae,{htmlFor:"newProjectName",children:"Project Name"}),e.jsx(z,{id:"newProjectName",value:y,onChange:s=>v(s.target.value),placeholder:"Enter new project name...",className:"mt-2",onKeyDown:s=>{s.key==="Enter"&&H()},autoFocus:!0})]}),e.jsxs(ne,{children:[e.jsx(N,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(N,{onClick:H,disabled:!y.trim(),children:"Rename"})]})]})}),e.jsx(ke,{isOpen:he,onClose:()=>R(!1),onConfirm:ue,title:"Delete Project",description:`Are you sure you want to delete "${M?.name}"? This action cannot be undone and all project data will be permanently removed.`,confirmLabel:"Delete Project",cancelLabel:"Cancel",variant:"destructive"})]})}export{Je as ProjectManager};
